# Lab1 - Pthreads

| Выполнил   | Стасевич Иван Александрович               |
|------------|-------------------------------------------|
| Группа     | 21ПИ-1                                    |
| Почта      | iastasevich@edu.hse.ru                    |
| ОС         | Windows 11 x64                            |
| RAM        | 16GB                                      |
| CPU        | Intel Core i5-12500H, 12 ядер, 16 потоков |
| Компилятор | GCC-MinGW                                 |

## Условие

См. `task.pdf`

## 1. Вычисление ПИ

**Код:** `src/montecarlo`

**Алгоритм:** генерируем массив случайных точек и делим его на части, предоставляя каждому потоку указатель на свою
область
массива
и количество точек для обработки. Каждый поток проверяет условие
x^2 + y^2 <= 1 для своих точек и увеличивает счётчик точек, попавших в окружность. По завершении работы всех потоков мы
суммируем результаты и вычисляем значение числа ПИ на основе полученных данных.

**Результаты:**
![montecarlo_results.png](assets%2Fmontecarlo_results.png)

**Выводы:** Использование многопоточности весьма эффективно в вычислениях. Увеличение числа потоков улучшает
производительность вычислений, с наибольшими улучшениями до 8
потоков. Эффективность многопоточности начинает уменьшаться после 4 потоков, вероятно, из-за накладных расходов на
управление потоками. Накладные расходы максимально заметны на маленьких данных, из-за чего использование многопоточности
на таких объемах становится неэффективно.

## 2. Множество Мандельброта

**Код:** `src/mandelbrot`

**Алгоритм:**
Определяем глобальные переменные для всех потоков: одна отслеживает количество найденных точек, а другая содержит
массив этих точек. Как только мы достигаем требуемого количества точек, все потоки прекращают работу. В начале мы
вычисляем `x_start` и `x_end`, ограничивая область поиска точек Мандельброта для каждого потока в зависимости от их
количества. Эти переменные рассчитаны так, чтобы потоки не обрабатывали одни и те же числа. Кроме того, при нахождении
точки поток блокирует мьютекс и обновляет глобальные переменные, изменяя количество точек и массив точек.

**Результаты:**
![mandelbrot_results.png](assets%2Fmandelbrot_results.png)

**Выводы:** Многопоточность значительно улучшает производительность при поиске множества Мандельброта, особенно на
больших данных. На них мы видим значительное улучшение производительности, но с уменьшением прироста после
4 потоков. На малых объемах данных создание и управление потоками может накладывать дополнительные затраты, что может
быть причиной незначительных улучшений при увеличении количества потоков.
Оптимальная эффективность достигается при использовании 6-8 потоков, при этом увеличение количества
потоков за эти пределы может не всегда быть оправданным из-за накладных расходов на управление потоками. 